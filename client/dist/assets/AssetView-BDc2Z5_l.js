import{d as A,r as l,h as V,v as B,x as D,y as S,_ as C,a as u,b as s,z as P,A as g,B as h,C as _,t as x,F,k as U,o as d,u as N,D as j,p as T,w as E,T as M,n as z}from"./index-BP0T5Ej7.js";const Q=A({__name:"AssetForm",emits:["submit"],setup(q,{expose:t,emit:p}){t();const e=p,i=l(null),o=l(null),r=l(null),m=l(""),a=l(""),v=l(null),c=l([]),n=l({quantity:"",name:"",ticker:""}),k=()=>(n.value={quantity:"",name:"",ticker:""},r.value||(n.value.quantity="Quantity is required and must be a number"),m.value||(n.value.name="Asset name is required"),a.value||(n.value.ticker="Ticker symbol is required"),!n.value.quantity&&!n.value.name&&!n.value.ticker);V(async()=>{i.value=B(),c.value=[]});const w=async()=>{a.value&&(v.value=await D(a.value)||0)},I={emit:e,userId:i,assetId:o,quantity:r,name:m,ticker:a,currentPrice:v,tickers:c,errors:n,validateFields:k,fetchCurrentPrice:w,handleSubmit:async y=>{if(!k()||!r.value)return;await w();const b=y==="sell"?-r.value:r.value,f={userId:Number(i.value),assetId:Number(o.value),quantity:b,name:m.value,ticker:a.value,current_price:Number(v.value)};e("submit",f),r.value=null,m.value="",a.value="",v.value=null,o.value=null},handleTickerInput:y=>{const b=y.target.value.toUpperCase();b?c.value=S.filter(f=>f.ticker.startsWith(b)).map(f=>f.ticker):c.value=[]},selectTicker:async y=>{a.value=y,await w();const b=S.find(f=>f.ticker===y);b&&(o.value=b.assetId),c.value=[]}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),L={class:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8"},O={class:"glass-card shadow-glow-white rounded-xl border border-white/10 p-8 sm:mx-auto sm:w-full sm:max-w-md"},G={class:"mt-1"},R={key:0,class:"text-sm text-danger-500"},W={class:"mt-1"},H={key:0,class:"text-sm text-danger-500"},J={class:"relative mt-1"},K={key:0,class:"absolute z-10 mt-1 max-h-48 w-full overflow-y-auto rounded-md border border-white/10 bg-dark-800/30 shadow-lg backdrop-blur-md"},X=["onClick"],Y={key:1,class:"text-sm text-danger-500"},Z={class:"mt-1"},$={class:"mt-1 block w-full rounded-md border border-white/10 bg-transparent px-3 py-2 text-white"},ee={class:"flex justify-between gap-4"};function te(q,t,p,e,i,o){return d(),u("div",L,[s("div",O,[t[12]||(t[12]=s("h2",{class:"mb-6 text-center font-display text-2xl font-bold text-white"}," Buy or Sell an Asset ",-1)),s("form",{class:"space-y-6",onSubmit:t[7]||(t[7]=P(()=>{},["prevent"]))},[g(s("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>e.userId=r),type:"hidden",id:"userId",name:"userId"},null,512),[[h,e.userId]]),g(s("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>e.assetId=r),type:"hidden",id:"assetId",name:"assetId"},null,512),[[h,e.assetId]]),s("div",null,[t[8]||(t[8]=s("label",{for:"quantity",class:"block text-sm font-medium text-dark-200"},"Quantity",-1)),s("div",G,[g(s("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>e.quantity=r),type:"number",step:"any",id:"quantity",name:"quantity",autocomplete:"quantity",required:"",class:"mt-1 block w-full rounded-md border-white/10 bg-transparent px-3 py-2 text-white shadow-sm placeholder:text-dark-400 focus:border-dark-900 focus:ring-dark-900"},null,512),[[h,e.quantity]]),e.errors.quantity?(d(),u("span",R,x(e.errors.quantity),1)):_("",!0)])]),s("div",null,[t[9]||(t[9]=s("label",{for:"name",class:"block text-sm font-medium text-dark-200"},"Asset Name",-1)),s("div",W,[g(s("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>e.name=r),type:"text",id:"name",name:"name",autocomplete:"name",required:"",class:"mt-1 block w-full rounded-md border-white/10 bg-transparent px-3 py-2 text-white shadow-sm placeholder:text-dark-400 focus:border-dark-900 focus:ring-dark-900"},null,512),[[h,e.name]]),e.errors.name?(d(),u("span",H,x(e.errors.name),1)):_("",!0)])]),s("div",null,[t[10]||(t[10]=s("label",{for:"ticker",class:"block text-sm font-medium text-dark-200"},"Ticker Symbol",-1)),s("div",J,[g(s("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>e.ticker=r),onInput:e.handleTickerInput,type:"text",id:"ticker",name:"ticker",autocomplete:"off",required:"",class:"mt-1 block w-full rounded-md border-white/10 bg-transparent px-3 py-2 text-white shadow-sm placeholder:text-dark-400 focus:border-dark-900 focus:ring-dark-900"},null,544),[[h,e.ticker]]),e.tickers.length>0?(d(),u("ul",K,[(d(!0),u(F,null,U(e.tickers,(r,m)=>(d(),u("li",{key:m,onClick:a=>e.selectTicker(r),class:"cursor-pointer px-3 py-2 text-white hover:bg-white/10"},x(r),9,X))),128))])):_("",!0),e.errors.ticker?(d(),u("span",Y,x(e.errors.ticker),1)):_("",!0)])]),s("div",null,[t[11]||(t[11]=s("label",{for:"currentPrice",class:"block text-sm font-medium text-dark-200"},"Current Price",-1)),s("div",Z,[s("p",$,x(e.currentPrice!==null?`$${e.currentPrice.toFixed(2)}`:"N/A"),1)])]),s("div",ee,[s("button",{type:"button",onClick:t[5]||(t[5]=r=>e.handleSubmit("buy")),class:"shadow-glow-success flex w-full justify-center rounded-md bg-success-600 px-4 py-3 text-sm font-semibold text-white transition-all hover:bg-success-500"}," Buy "),s("button",{type:"button",onClick:t[6]||(t[6]=r=>e.handleSubmit("sell")),class:"shadow-glow-danger flex w-full justify-center rounded-md bg-danger-600 px-4 py-3 text-sm font-semibold text-white transition-all hover:bg-danger-500"}," Sell ")])],32)])])}const se=C(Q,[["render",te],["__scopeId","data-v-35c47ba7"],["__file","/Users/grantinnes/Dev-Stuff/Turing-College/module-3-BE/capstone/ginnes-BE.3.5/client/src/components/AssetForm.vue"]]),re=A({__name:"AssetView",setup(q,{expose:t}){t();const p=N(),e=l(!1),i=l(""),o=l("success"),a={router:p,showAlert:e,alertMessage:i,alertType:o,handleSubmit:async v=>{var c,n;try{await j(v),e.value=!0,i.value="Transaction Complete!",o.value="success"}catch(k){const w=((n=(c=k.response)==null?void 0:c.data)==null?void 0:n.message)||"Failed to submit transaction. Please try again.";i.value=w,console.error("Error submitting asset form:",k),e.value=!0,o.value="error"}setTimeout(()=>{e.value=!1},1500)},goToDashboard:()=>{p.push({name:"Dashboard"})},AssetForm:se};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),ae={class:"AssetView"};function ne(q,t,p,e,i,o){return d(),u("div",ae,[T(M,{name:"fade"},{default:E(()=>[e.showAlert?(d(),u("div",{key:0,class:z(["fixed left-0 top-0 z-50 w-full p-4 text-center text-xl font-medium text-white backdrop-blur-sm",e.alertType==="success"?"bg-success-600/90":"bg-danger-600/90"])},x(e.alertMessage),3)):_("",!0)]),_:1}),T(e.AssetForm,{onSubmit:e.handleSubmit}),s("div",{class:"mt-6 flex justify-center"},[s("button",{class:"rounded-lg bg-primary-600 px-5 py-3 text-white shadow-glow-primary transition hover:bg-primary-500",onClick:e.goToDashboard}," Go back to Dashboard ")])])}const de=C(re,[["render",ne],["__scopeId","data-v-63d5c0ad"],["__file","/Users/grantinnes/Dev-Stuff/Turing-College/module-3-BE/capstone/ginnes-BE.3.5/client/src/views/AssetView.vue"]]);export{de as default};
