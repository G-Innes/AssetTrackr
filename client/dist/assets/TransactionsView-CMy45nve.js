import{d as D,u as V,r as f,f as A,D as w,c as B,E as N,_ as E,i as F,a as c,b as e,F as v,j as _,k as x,t as n,m as L,w as U,o as d,n as b}from"./index-BJjcXYf6.js";const M=D({__name:"TransactionsView",setup(k,{expose:o}){o();const m=V(),s=f([]),i=f(!0),l=f("all");A(async()=>{try{s.value=await w()}catch(r){console.error("Error fetching transactions:",r)}finally{i.value=!1}});const p=async()=>{i.value=!0;try{s.value=await w(),l.value="all"}catch(r){console.error("Error fetching all transactions:",r)}finally{i.value=!1}},t=async r=>{i.value=!0;try{const a=r.toLowerCase();s.value=await N(a),l.value=a}catch(a){console.error("Error fetching transactions by type:",a),await p()}finally{i.value=!1}},u=B(()=>l.value==="all"?s.value:s.value.filter(r=>{var a,y;return((a=r.transaction_type)==null?void 0:a.toLowerCase())===l.value||((y=r.transactionType)==null?void 0:y.toLowerCase())===l.value}));function g(r){if(!r)return"N/A";try{return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(a){return console.error("Error formatting date:",a),"Invalid Date"}}function T(r){if(r==null)return"$0.00";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(r)}catch(a){return console.error("Error formatting currency:",a),"$0.00"}}function C(r){const a=r.asset_ticker||r.assetTicker;if(!a){console.error("Cannot view details - missing ticker",r);return}m.push({name:"AssetManage",query:{ticker:a}})}const h={router:m,transactions:s,isLoading:i,activeFilter:l,fetchAllTransactions:p,fetchTransactionsByType:t,filteredTransactions:u,formatDate:g,formatCurrency:T,viewDetails:C};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),S={class:"TransactionsView p-4"},j={class:"mb-6 border-b border-white/10"},z={class:"-mb-px flex space-x-8","aria-label":"Tabs"},H=["onClick"],q={key:0,class:"glass-card shadow-glow-white flex justify-center rounded-xl border border-white/10 py-12"},I={key:1,class:"glass-card shadow-glow-white rounded-xl border border-dashed border-white/20 p-8 text-center"},P={class:"mt-1 text-sm text-dark-400"},G={class:"mt-6"},O={key:2,class:"glass-card shadow-glow-white overflow-hidden rounded-xl border border-white/10"},Q={class:"relative overflow-x-auto"},R={class:"w-full divide-y divide-white/10"},J={class:"divide-y divide-white/10"},K={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm text-dark-200 sm:pl-6"},W={class:"whitespace-nowrap px-3 py-4"},X={class:"flex items-center"},Y={class:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-primary-500/20 text-primary-400 ring-1 ring-primary-500/30"},Z={class:"ml-4"},$={class:"text-sm font-medium text-white"},ee={class:"text-sm text-dark-300"},te={class:"whitespace-nowrap px-3 py-4 text-sm"},se={class:"whitespace-nowrap px-3 py-4 text-sm text-dark-200"},re={class:"whitespace-nowrap px-3 py-4 text-sm text-dark-200"},oe={class:"whitespace-nowrap px-3 py-4 text-sm font-medium text-white"},ae={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ne=["onClick"],ie={class:"sr-only"};function le(k,o,m,s,i,l){const p=F("router-link");return d(),c("div",S,[o[6]||(o[6]=e("div",{class:"mb-8"},[e("h1",{class:"font-display text-3xl font-bold text-white"},"Transactions"),e("p",{class:"mt-2 text-dark-300"},"View your transaction history")],-1)),e("div",j,[e("nav",z,[(d(),c(v,null,_(["all","buy","sell"],t=>e("button",{key:t,onClick:u=>t==="all"?s.fetchAllTransactions():s.fetchTransactionsByType(t),class:b([s.activeFilter===t?"border-primary-500 text-primary-400":"border-transparent text-dark-300 hover:border-white/20 hover:text-dark-200","whitespace-nowrap border-b-2 px-1 py-4 text-sm font-medium capitalize transition-colors"])},n(t),11,H)),64))])]),s.isLoading?(d(),c("div",q,o[0]||(o[0]=[e("div",{class:"flex items-center text-dark-300"},[e("svg",{class:"mr-2 h-5 w-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),x(" Loading transactions... ")],-1)]))):s.filteredTransactions.length===0?(d(),c("div",I,[o[2]||(o[2]=e("div",{class:"mx-auto h-12 w-12 text-dark-400"},[e("svg",{class:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])],-1)),o[3]||(o[3]=e("h3",{class:"mt-2 text-sm font-medium text-white"},"No transactions found",-1)),e("p",P,n(s.activeFilter==="all"?"Get started by adding your first transaction.":`No ${s.activeFilter} transactions found.`),1),e("div",G,[L(p,{to:"/dashboard/asset-manage",class:"shadow-glow-primary inline-flex items-center rounded-md bg-primary-600 px-3 py-2 text-sm font-semibold text-white hover:bg-primary-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600"},{default:U(()=>o[1]||(o[1]=[e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),x(" Add Transaction ")])),_:1})])])):(d(),c("div",O,[e("div",Q,[e("table",R,[o[5]||(o[5]=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-dark-300 sm:pl-6"}," Date "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-dark-300"}," Asset "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-dark-300"}," Type "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-dark-300"}," Quantity "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-dark-300"}," Price "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-dark-300"}," Total "),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"View")])])],-1)),e("tbody",J,[(d(!0),c(v,null,_(s.filteredTransactions,t=>(d(),c("tr",{key:t.id,class:"hover:bg-white/5"},[e("td",K,n(s.formatDate(t.transaction_date||t.transactionDate)),1),e("td",W,[e("div",X,[e("div",Y,n((t.asset_ticker||t.assetTicker||"N/A").substring(0,3)),1),e("div",Z,[e("div",$,n(t.asset_name||t.assetName||"Unknown Asset"),1),e("div",ee,n(t.asset_ticker||t.assetTicker||"N/A"),1)])])]),e("td",te,[e("span",{class:b([(t.transaction_type||t.transactionType||"").toLowerCase()==="buy"?"bg-success-900/30 text-success-400 ring-1 ring-success-700/30":"bg-danger-900/30 text-danger-400 ring-1 ring-danger-700/30","inline-flex rounded-full px-2 py-1 text-xs font-semibold leading-5"])},n(t.transaction_type||t.transactionType||"Unknown"),3)]),e("td",se,n(t.quantity||0),1),e("td",re,n(s.formatCurrency(t.price)),1),e("td",oe,n(s.formatCurrency((t.quantity||0)*(t.price||0))),1),e("td",ae,[e("button",{onClick:u=>s.viewDetails(t),class:"text-primary-400 hover:text-primary-300"},[o[4]||(o[4]=x(" View")),e("span",ie,", "+n(t.asset_name||t.assetName||"Unknown Asset"),1)],8,ne)])]))),128))])])])]))])}const de=E(M,[["render",le],["__scopeId","data-v-03fb0ba9"],["__file","/Users/grantinnes/Dev-Stuff/Turing-College/module-3-BE/capstone/ginnes-BE.3.5/client/src/views/TransactionsView.vue"]]);export{de as default};
