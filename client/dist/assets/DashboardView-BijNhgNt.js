import{d as E,c as w,_ as P,a as f,b as e,n as b,t as m,o as h,e as q,r as k,g as V,u as N,f as I,s as $,h as A,i as H,j as z,F,k as S,l as D,m as G,p as O,w as R,q as J}from"./index-BP0T5Ej7.js";const K=E({__name:"AssetCard",props:{asset:{type:Object,required:!0}},setup(u,{expose:s}){s();const t=u,r=w(()=>t.asset.price_change_percentage_24h?t.asset.price_change_percentage_24h>=0?"text-success-400":"text-danger-400":"text-dark-300"),i=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),l=n=>n?`${n>=0?"+":""}${n.toFixed(2)}%`:"0.00%",a=w(()=>{const n=["primary","secondary","success","danger"],d=t.asset.name.split("").reduce((v,p)=>p.charCodeAt(0)+v,0)%n.length;return`bg-${n[d]}-500/20 text-${n[d]}-400 ring-${n[d]}-500/30`}),c=w(()=>{const n=["primary","secondary","purple","blue"],d=t.asset.name.split("").reduce((v,p)=>p.charCodeAt(0)+v,0)%n.length;return`shadow-glow-${n[d]}`}),g={props:t,priceChangeClass:r,formatCurrency:i,formatPercentage:l,iconBackground:a,cardGlow:c};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),Q={class:"p-6"},W={class:"flex items-center justify-between"},X={class:"flex items-center"},Y={class:"ml-3"},Z={class:"font-medium text-white"},ee={class:"text-sm text-dark-300"},te={class:"text-right"},se={class:"font-medium text-white"},re={class:"mt-6 flex justify-between border-t border-white/10 pt-4 text-sm"},ne={class:"font-medium text-white"},oe={class:"flex border-t border-white/10"};function ae(u,s,t,r,i,l){return h(),f("div",{class:b(["glass-card group relative overflow-hidden rounded-xl border border-white/10 bg-glass-gradient transition-all duration-300 hover:-translate-y-1",r.cardGlow])},[e("div",Q,[e("div",W,[e("div",X,[e("div",{class:b(["flex h-12 w-12 items-center justify-center rounded-full font-semibold ring-1",r.iconBackground])},m(t.asset.ticker.substring(0,3)),3),e("div",Y,[e("h3",Z,m(t.asset.name),1),e("p",ee,m(t.asset.quantity)+" "+m(t.asset.ticker),1)])]),e("div",te,[e("p",se,m(r.formatCurrency(t.asset.value)),1),e("p",{class:b(["text-sm",r.priceChangeClass])},m(r.formatPercentage(t.asset.price_change_percentage_24h)),3)])]),e("div",re,[s[2]||(s[2]=e("span",{class:"text-dark-300"},"Current Price",-1)),e("span",ne,m(r.formatCurrency(t.asset.current_price)),1)])]),e("div",oe,[e("button",{class:"flex-1 py-3 text-sm font-medium text-primary-400 transition-colors hover:bg-white/5",onClick:s[0]||(s[0]=a=>u.$emit("buy",t.asset))}," Buy More "),s[3]||(s[3]=e("div",{class:"w-px bg-white/10"},null,-1)),e("button",{class:"flex-1 py-3 text-sm font-medium text-danger-400 transition-colors hover:bg-white/5",onClick:s[1]||(s[1]=a=>u.$emit("sell",t.asset))}," Sell ")])],2)}const ce=P(K,[["render",ae],["__scopeId","data-v-112cc7b6"],["__file","/Users/grantinnes/Dev-Stuff/Turing-College/module-3-BE/capstone/ginnes-BE.3.5/client/src/components/dashboard/AssetCard.vue"]]),ie=q("dashboard",()=>{const u=k([]),s=k(0),t=k(!1);async function r(){t.value=!0;try{const i=await V();u.value=i,s.value=i.reduce((l,a)=>{const c=a.current_price??0;return l+a.quantity*c},0)}catch(i){console.error("Error fetching assets:",i)}finally{t.value=!1}}return{assets:u,totalValue:s,isLoading:t,fetchAssets:r}}),le=E({__name:"DashboardView",setup(u,{expose:s}){s();const t=N(),r=I(),i=ie(),{assets:l,totalValue:a,isLoading:c}=$(i),g=["#A0E7E5","#FFB3BA","#FFFACD","#CABBE9","#FFDAC1","#DECBE4","#A0C4FF","#C1E1C1","#E6F2FF","#B2F2BB","#E3D5FF","#FFD1BA"],n=k(""),C=w(()=>[{name:"Total Portfolio Value",value:v(a.value)},{name:"Portfolio Change (24h)",value:p(d()),change:d(),changeType:d()>=0?"increase":"decrease"},{name:"Total Assets",value:l.value.length},{name:"Last Updated",value:new Date().toLocaleTimeString()}]);function d(){if(!l.value.length)return 0;const y=l.value.map(_=>(_.price_change_percentage_24h||0)*_.value/100).reduce((_,x)=>_+x,0);return a.value>0?y/a.value*100:0}function v(o){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o||0)}function p(o){return`${o>=0?"+":""}${o.toFixed(2)}%`}A(async()=>{try{const o=await H();n.value=o.username;const y=await V();l.value=y,a.value=y.reduce((_,x)=>{const L=x.current_price??0;return _+x.quantity*L},0)}catch(o){console.error("Error fetching assets:",o)}});function U(o){return g[o%g.length]}function j(){r.logout(),t.push({name:"Login"})}function T(o){t.push({name:"AssetManage",query:{ticker:o.ticker,action:"buy"}})}function M(o){t.push({name:"AssetManage",query:{ticker:o.ticker,action:"sell"}})}A(()=>{i.fetchAssets()});const B={router:t,userStore:r,dashboardStore:i,assets:l,totalValue:a,isLoading:c,colors:g,username:n,stats:C,calculatePortfolioChange:d,formatCurrency:v,formatPercentage:p,getColor:U,logoutUser:j,handleBuy:T,handleSell:M,AssetCard:ce};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),de={class:"mb-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4"},ue={class:"truncate text-sm font-medium text-dark-300"},he={key:0,class:"glass-card shadow-glow-white flex justify-center rounded-xl border border-white/10 py-12"},me={key:1,class:"glass-card shadow-glow-white rounded-xl border border-dashed border-white/20 p-8 text-center"},ge={class:"mt-6"},fe={key:2,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"};function ve(u,s,t,r,i,l){const a=z("router-link");return h(),f("div",null,[s[3]||(s[3]=e("div",{class:"mb-8"},[e("h1",{class:"font-display text-3xl font-bold text-white"},"Dashboard"),e("p",{class:"mt-2 text-dark-300"},"Track and manage your cryptocurrency portfolio")],-1)),e("div",de,[(h(!0),f(F,null,S(r.stats,(c,g)=>(h(),f("div",{key:g,class:"glass-card shadow-glow-white overflow-hidden rounded-xl border border-white/10 px-6 py-5"},[e("dt",ue,m(c.name),1),e("dd",{class:b(["mt-2 text-2xl font-semibold tracking-tight",c.change!==void 0?c.changeType==="increase"?"text-success-400":"text-danger-400":"text-white"])},m(c.value),3)]))),128))]),r.isLoading?(h(),f("div",he,s[0]||(s[0]=[e("div",{class:"flex items-center text-dark-300"},[e("svg",{class:"mr-2 h-5 w-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),D(" Loading your portfolio... ")],-1)]))):r.assets.length?(h(),f("div",fe,[(h(!0),f(F,null,S(r.assets,c=>(h(),J(r.AssetCard,{key:c.id,asset:c,onBuy:r.handleBuy,onSell:r.handleSell},null,8,["asset"]))),128))])):(h(),f("div",me,[s[2]||(s[2]=G('<div class="mx-auto h-12 w-12 text-dark-400" data-v-336c5134><svg class="h-full w-full" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-336c5134><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" data-v-336c5134></path></svg></div><h3 class="mt-2 text-sm font-medium text-white" data-v-336c5134>No assets yet</h3><p class="mt-1 text-sm text-dark-400" data-v-336c5134> Get started by adding your first cryptocurrency asset. </p>',3)),e("div",ge,[O(a,{to:"/dashboard/asset-manage",class:"shadow-glow-primary inline-flex items-center rounded-md bg-primary-600 px-3 py-2 text-sm font-semibold text-white hover:bg-primary-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600"},{default:R(()=>s[1]||(s[1]=[e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),D(" Add Asset ")])),_:1})])]))])}const _e=P(le,[["render",ve],["__scopeId","data-v-336c5134"],["__file","/Users/grantinnes/Dev-Stuff/Turing-College/module-3-BE/capstone/ginnes-BE.3.5/client/src/views/DashboardView.vue"]]);export{_e as default};
