import{d as j,c as b,_ as T,a as f,b as e,n as k,t as m,o as h,e as M,r as C,g as q,u as U,s as E,f as B,h as F,i as L,F as P,j as V,k as D,l as N,m as $,w as H,p as z}from"./index-BJjcXYf6.js";const G=j({__name:"AssetCard",props:{asset:{type:Object,required:!0}},emits:["buy","sell"],setup(u,{expose:t}){t();const s=u,r=b(()=>s.asset.price_change_percentage_24h?s.asset.price_change_percentage_24h>=0?"text-success-400":"text-danger-400":"text-dark-300"),n=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),l=a=>a?`${a>=0?"+":""}${a.toFixed(2)}%`:"0.00%",d=b(()=>{const a=["primary","secondary","success","danger"],g=s.asset.name.split("").reduce((v,y)=>y.charCodeAt(0)+v,0)%a.length;return`bg-${a[g]}-500/20 text-${a[g]}-400 ring-${a[g]}-500/30`}),o=b(()=>{const a=["primary","secondary","purple","blue"],g=s.asset.name.split("").reduce((v,y)=>y.charCodeAt(0)+v,0)%a.length;return`shadow-glow-${a[g]}`}),p={props:s,priceChangeClass:r,formatCurrency:n,formatPercentage:l,iconBackground:d,cardGlow:o};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),O={class:"p-6"},R={class:"flex items-center justify-between"},J={class:"flex items-center"},K={class:"ml-3"},Q={class:"font-medium text-white"},W={class:"text-sm text-dark-300"},X={class:"text-right"},Y={class:"font-medium text-white"},Z={class:"mt-6 flex justify-between border-t border-white/10 pt-4 text-sm"},ee={class:"font-medium text-white"},te={class:"flex border-t border-white/10"};function se(u,t,s,r,n,l){return h(),f("div",{class:k(["glass-card group relative overflow-hidden rounded-xl border border-white/10 bg-glass-gradient transition-all duration-300 hover:-translate-y-1",r.cardGlow])},[e("div",O,[e("div",R,[e("div",J,[e("div",{class:k(["flex h-12 w-12 items-center justify-center rounded-full font-semibold ring-1",r.iconBackground])},m(s.asset.ticker.substring(0,3)),3),e("div",K,[e("h3",Q,m(s.asset.name),1),e("p",W,m(s.asset.quantity)+" "+m(s.asset.ticker),1)])]),e("div",X,[e("p",Y,m(r.formatCurrency(s.asset.value)),1),e("p",{class:k(["text-sm",r.priceChangeClass])},m(r.formatPercentage(s.asset.price_change_percentage_24h)),3)])]),e("div",Z,[t[2]||(t[2]=e("span",{class:"text-dark-300"},"Current Price",-1)),e("span",ee,m(r.formatCurrency(s.asset.current_price)),1)])]),e("div",te,[e("button",{class:"flex-1 py-3 text-sm font-medium text-primary-400 transition-colors hover:bg-white/5",onClick:t[0]||(t[0]=d=>u.$emit("buy",s.asset))}," Buy More "),t[3]||(t[3]=e("div",{class:"w-px bg-white/10"},null,-1)),e("button",{class:"flex-1 py-3 text-sm font-medium text-danger-400 transition-colors hover:bg-white/5",onClick:t[1]||(t[1]=d=>u.$emit("sell",s.asset))}," Sell ")])],2)}const re=T(G,[["render",se],["__scopeId","data-v-112cc7b6"],["__file","/Users/grantinnes/Dev-Stuff/Turing-College/module-3-BE/capstone/ginnes-BE.3.5/client/src/components/dashboard/AssetCard.vue"]]),ae=M("dashboard",()=>{const u=C([]),t=C(0),s=C(!1);async function r(){s.value=!0;try{const n=await q();u.value=n,t.value=n.reduce((l,d)=>{const o=d.current_price??0;return l+d.quantity*o},0)}catch(n){console.error("Error fetching assets:",n)}finally{s.value=!1}}return{assets:u,totalValue:t,isLoading:s,fetchAssets:r}}),ne=j({__name:"DashboardView",setup(u,{expose:t}){t();const s=U(),r=ae(),{assets:n,totalValue:l,isLoading:d}=E(r),o=C(""),p=b(()=>[{name:"Total Portfolio Value",value:x(l.value)},{name:"Portfolio Change (24h)",value:g(a()),change:a(),changeType:a()>=0?"increase":"decrease"},{name:"Total Assets",value:n.value.length},{name:"Last Updated",value:new Date().toLocaleTimeString()}]);function a(){if(!n.value.length)return 0;const w=n.value.map(_=>(_.price_change_percentage_24h||0)*_.value/100).reduce((_,i)=>_+i,0);return l.value>0?w/l.value*100:0}function x(c){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c||0)}function g(c){return`${c>=0?"+":""}${c.toFixed(2)}%`}B(async()=>{try{const c=await F();o.value=c.username;const w=await q(),_=w.map(i=>({id:i.assetId||0,assetId:i.assetId,name:i.name,ticker:i.ticker,quantity:i.quantity,current_price:i.current_price||0,value:(i.current_price||0)*i.quantity,price_change_percentage_24h:0}));n.value=_,l.value=w.reduce((i,A)=>{const I=A.current_price??0;return i+A.quantity*I},0)}catch(c){console.error("Error fetching assets:",c)}});function v(c){s.push({name:"AssetManage",query:{ticker:c.ticker,action:"buy"}})}function y(c){s.push({name:"AssetManage",query:{ticker:c.ticker,action:"sell"}})}B(()=>{r.fetchAssets()});const S={router:s,dashboardStore:r,assets:n,totalValue:l,isLoading:d,username:o,stats:p,calculatePortfolioChange:a,formatCurrency:x,formatPercentage:g,handleBuy:v,handleSell:y,AssetCard:re};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),oe={class:"mb-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4"},ce={class:"truncate text-sm font-medium text-dark-300"},ie={key:0,class:"glass-card shadow-glow-white flex justify-center rounded-xl border border-white/10 py-12"},le={key:1,class:"glass-card shadow-glow-white rounded-xl border border-dashed border-white/20 p-8 text-center"},de={class:"mt-6"},ue={key:2,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"};function he(u,t,s,r,n,l){const d=L("router-link");return h(),f("div",null,[t[3]||(t[3]=e("div",{class:"mb-8"},[e("h1",{class:"font-display text-3xl font-bold text-white"},"Dashboard"),e("p",{class:"mt-2 text-dark-300"},"Track and manage your cryptocurrency portfolio")],-1)),e("div",oe,[(h(!0),f(P,null,V(r.stats,(o,p)=>(h(),f("div",{key:p,class:"glass-card shadow-glow-white overflow-hidden rounded-xl border border-white/10 px-6 py-5"},[e("dt",ce,m(o.name),1),e("dd",{class:k(["mt-2 text-2xl font-semibold tracking-tight",o.change!==void 0?o.changeType==="increase"?"text-success-400":"text-danger-400":"text-white"])},m(o.value),3)]))),128))]),r.isLoading?(h(),f("div",ie,t[0]||(t[0]=[e("div",{class:"flex items-center text-dark-300"},[e("svg",{class:"mr-2 h-5 w-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),D(" Loading your portfolio... ")],-1)]))):r.assets.length?(h(),f("div",ue,[(h(!0),f(P,null,V(r.assets,o=>(h(),z(r.AssetCard,{key:o.id,asset:o,onBuy:r.handleBuy,onSell:r.handleSell},null,8,["asset"]))),128))])):(h(),f("div",le,[t[2]||(t[2]=N('<div class="mx-auto h-12 w-12 text-dark-400" data-v-336c5134><svg class="h-full w-full" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-336c5134><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" data-v-336c5134></path></svg></div><h3 class="mt-2 text-sm font-medium text-white" data-v-336c5134>No assets yet</h3><p class="mt-1 text-sm text-dark-400" data-v-336c5134> Get started by adding your first cryptocurrency asset. </p>',3)),e("div",de,[$(d,{to:"/dashboard/asset-manage",class:"shadow-glow-primary inline-flex items-center rounded-md bg-primary-600 px-3 py-2 text-sm font-semibold text-white hover:bg-primary-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600"},{default:H(()=>t[1]||(t[1]=[e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),D(" Add Asset ")])),_:1})])]))])}const ge=T(ne,[["render",he],["__scopeId","data-v-336c5134"],["__file","/Users/grantinnes/Dev-Stuff/Turing-College/module-3-BE/capstone/ginnes-BE.3.5/client/src/views/DashboardView.vue"]]);export{ge as default};
