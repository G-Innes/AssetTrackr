import{d as E,u as S,G as F,r as p,_ as V,i as v,a as g,b as r,m as l,w as n,F as O,o as f,k as i,B as k,z as y,A as h,t as U}from"./index-BJjcXYf6.js";import{P as B}from"./PageForm-CAgivrjK.js";const D=E({__name:"LoginView",setup(L,{expose:e}){e();const u=S(),s=F(),m=p({usernameOrEmail:"",password:""}),c=p(!1),t=p("");async function d(){var b,w;try{const{usernameOrEmail:a,password:x}=m.value;if(!a||!x){t.value="Username/Email and password are required";return}const _=await s.login(a,x);_.success?(c.value=!0,setTimeout(()=>{u.push({name:"Dashboard"})},500)):t.value=_.message||"Login failed"}catch(a){t.value=((w=(b=a.response)==null?void 0:b.data)==null?void 0:w.message)||a.message||"Unknown error"}}const o={router:u,userStore:s,userForm:m,hasSucceeded:c,errorMessage:t,submitLogin:d,PageForm:B};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),M={class:"fixed top-0 z-10 w-full backdrop-blur-sm"},C={class:"glass-card border-b border-white/10 px-6 py-4"},N={class:"mx-auto flex items-center justify-between"},P={class:"mb-4"},T={class:"mb-4"},q={key:0,class:"mb-4 rounded-lg bg-success-600/20 p-4 text-white","data-testid":"successMessage"},R={key:1,class:"mb-4 rounded-lg bg-danger-600/20 p-4 text-white","data-testid":"errorMessage"},j={class:"mt-4 text-center text-sm text-dark-300"};function z(L,e,u,s,m,c){const t=v("router-link"),d=v("RouterLink");return f(),g(O,null,[r("header",M,[r("div",C,[r("div",N,[l(t,{to:"/",class:"text-xl font-bold text-white"},{default:n(()=>e[2]||(e[2]=[i(" AssetTrackr ")])),_:1})])])]),l(s.PageForm,{heading:"Log in to your account",formLabel:"Login",onSubmit:s.submitLogin},{default:n(()=>[r("div",P,[e[3]||(e[3]=r("label",{for:"usernameOrEmail",class:"mb-2 block text-sm font-medium text-dark-200"},"Username or Email",-1)),y(r("input",{id:"usernameOrEmail",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.userForm.usernameOrEmail=o),required:"",class:"w-full rounded-lg border border-white/10 bg-transparent p-2.5 text-white focus:border-dark-900 focus:outline-none focus:ring-2 focus:ring-dark-900/60"},null,512),[[h,s.userForm.usernameOrEmail]])]),r("div",T,[e[4]||(e[4]=r("label",{for:"password",class:"mb-2 block text-sm font-medium text-dark-200"},"Password",-1)),y(r("input",{id:"password",type:"password","onUpdate:modelValue":e[1]||(e[1]=o=>s.userForm.password=o),required:"",autocomplete:"current-password",class:"w-full rounded-lg border border-white/10 bg-transparent p-2.5 text-white focus:border-dark-900 focus:outline-none focus:ring-2 focus:ring-dark-900/60"},null,512),[[h,s.userForm.password]])]),s.hasSucceeded?(f(),g("div",q,[e[6]||(e[6]=i(" You have successfully logged in. ")),l(d,{to:{name:"Dashboard"},class:"font-semibold text-white underline"},{default:n(()=>e[5]||(e[5]=[i("Go to the Dashboard")])),_:1})])):k("",!0),s.errorMessage?(f(),g("div",R,U(s.errorMessage),1)):k("",!0),e[7]||(e[7]=r("div",{class:"grid"},[r("button",{type:"submit",class:"shadow-glow-primary rounded-lg bg-primary-600 px-5 py-3 text-white transition hover:bg-primary-500"}," Log in ")],-1))]),footer:n(()=>[r("div",j,[e[9]||(e[9]=i(" Not a member? ")),l(d,{to:{name:"Signup"},class:"font-semibold text-primary-400 hover:text-primary-300"},{default:n(()=>e[8]||(e[8]=[i("Sign up")])),_:1})])]),_:1})],64)}const I=V(D,[["render",z],["__scopeId","data-v-45f5edd7"],["__file","/Users/grantinnes/Dev-Stuff/Turing-College/module-3-BE/capstone/ginnes-BE.3.5/client/src/views/LoginView.vue"]]);export{I as default};
